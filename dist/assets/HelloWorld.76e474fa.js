import e from"./SelectMenu.3c578821.js";import{f as t,n,r as a,c as o,a as r,t as s,w as i,v as d,g as u,h as l,p as c,i as p,j as h,o as y}from"./vendor.e9e69801.js";var x={hiragana:{a:"あ",i:"い",u:"う",e:"え",o:"お",ka:"か",ki:"き",ku:"く",ke:"け",ko:"こ",sa:"さ",shi:"し",su:"す",se:"せ",so:"そ",ta:"た",chi:"ち",tsu:"つ",te:"て",to:"と",na:"な",ni:"に",nu:"ぬ",ne:"ね",no:"の",ha:"は",hi:"ひ",hu:"ふ",he:"へ",ho:"ほ",ma:"ま",mi:"み",mu:"む",me:"め",mo:"も",ya:"や",yu:"ゆ",yo:"よ",ra:"ら",ri:"り",ru:"る",re:"れ",ro:"ろ",wa:"わ",n:"ん",wo:"を",ga:"が",gi:"ぎ",gu:"ぐ",ge:"げ",go:"ご",za:"ざ",zu:"ず",ze:"ぜ",zo:"ぞ",da:"だ",ji:["じ","ぢ"],ceshi:["测","试","ttt"],du:"づ",de:"で",do:"ど",ba:"ば",bi:"び",bu:"ぶ",be:"べ",bo:"ぼ",pa:"ぱ",pi:"ぴ",pu:"ぷ",pe:"ぺ",po:"ぽ",kya:"きゃ",kyu:"きゅ",kyo:"きょ",sha:"しや",shu:"しゅ",sho:"しよ",cha:"ちゃ",chu:"ちゅ",cho:"ちよ",nya:"にあ",nyu:"にゆ",nyo:"によ",hya:"ひや",hyu:"ひゆ",hyo:"ひよ",mya:"みや",myu:"みゅ",myo:"みよ",rya:"りや",ryu:"りゅ",ryo:"りよ",gya:"ぎや",gyu:"ぎゅ",gyo:"ぎよ",ja:"じや",ju:"じゅ",jo:"じよ",bya:"びや",byu:"びゅ",byo:"びよ",pya:"ぴや",pyu:"ぴゅ",pyo:"ぴよ"},katakana:{"あ":"ア","い":"イ","う":"ウ","え":"エ","お":"オ","か":"カ","き":"キ","く":"ク","け":"ケ","こ":"コ","が":"ガ","ぎ":"ギ","ぐ":"グ","げ":"ゲ","ご":"ゴ","さ":"サ","し":"シ","す":"ス","せ":"セ","そ":"ソ","ざ":"ザ","じ":"ジ","ず":"ズ","ぜ":"ゼ","ぞ":"ゾ","た":"タ","ち":"チ","つ":"ツ","て":"テ","と":"ト","だ":"ダ","ぢ":"ヅ","づ":"ッ","で":"デ","ど":"ド","な":"ナ","に":"ニ","ぬ":"ヌ","ね":"ネ","の":"ノ","ま":"マ","み":"ミ","む":"ム","め":"メ","も":"モ","は":"ハ","ひ":"ヒ","ふ":"フ","へ":"ヘ","ほ":"ホ","ぱ":"パ","ぴ":"ピ","ぷ":"プ","ぺ":"ペ","ぽ":"ポ","ば":"バ","び":"ビ","ぶ":"ブ","べ":"ベ","ぼ":"ボ","ら":"ラ","り":"リ","る":"ル","れ":"レ","ろ":"ロ","や":"ヤ","ゆ":"ユ","ょ":"ヨ","ゎ":"ワ","ん":"ン"}},m={name:"输入区",components:{SelectMenu:e},methods:{async inputKey(e){if(await this.validateWord(e.data)){let t=this.inputWord.filter((e=>void 0!==e.wordIndexInArr));t.map((e=>{this.inputWord[e.index]&&(this.inputWord[e.index].index=e.index,this.inputWord[e.index].wordIndexInArr=e.wordIndexInArr,this.inputWord[e.index].value=e.value)})),this.inputWord.map(((n,a)=>{if((void 0===n.index||"deleteContentBackward"===e.inputType)&&""!==n.key)switch(Object.prototype.toString.call(this.a[n.key])){case"[object String]":return n.value=this.a[n.key],this.showRecommend=!1,n;case"[object Array]":let e=void 0!==n.index&&t[n.index].key===n.key;return void 0===n.index||e?void 0!==n.index&&e||(n.value=n.key,n.index=a,this.showRecommend=!0):(delete n.index,n.value=n.key),this.selectedIndex=n.index,n;default:return n.index&&delete n.index,n.value&&delete n.value,void 0!==n.wordIndexInArr&&delete n.wordIndexInArr,n.value=(this.a[n.key],n.key),this.showRecommend=!1,n}}))}else console.warn("不可识别的字符")},selectedText(e,t,n,a){void 0!==e&&(this.showRecommend=!1,this.inputWord[t].wordIndexInArr=n,this.inputWord[t].value=e[0]),this.$refs.textarea.focus()},validateWord:e=>new Promise((t=>{switch(e){case" ":case"deleteContentBackward":return t(!1),!1;default:t(!0)}})).catch((e=>{console.error(e)}))},setup(){const{hiragana:e,katakana:a}=x;Object.entries(e).filter((e=>e[1]instanceof Array));const o=t(""),r=t(""),s=t(null),i=t(!1),d=t({});let u=[],l=[];const c=()=>{const e=o.value.split(" ").filter((e=>!!e));console.log(getSelection()),l=e.map(((e,t)=>({key:e,value:p(e,t),wordIndex:t}))),r.value=y(l)};function p(e,t){let n=e;if(e.includes("\n")){n=e.split("\n").map((e=>h(e,t))).join("\n")}else n=h(e,t);return n}function h(t,n){if(e[t]instanceof Array){const a=u.find((e=>e.wordIndexInSentence===n));return a?t[a.selectedIndex]:`这是默认值${e[t][0]}`}return e[t]||t}const y=t=>t.map((t=>{if(e[t.key]instanceof Array){const e=u.find((e=>t.wordIndex===e.wordIndexInSentence));return(null==e?void 0:e.katakanaText)||"__ ?? __"}return t.value})).join("");return{inputStr:o,outputStr:r,textareaDom:s,showSelectMenu:i,katakanaToChoose:d,doKeyup:e=>{const t=e.code;switch(console.log("输入的键:",t),t){case"删除":break;default:c()}},doPaste:()=>{c()},doChooseWord:e=>{i.value=!1;const t=u.findIndex((t=>t.wordIndexInSentence===e.wordIndexInSentence));t>-1?u.splice(t,1,e):u.push(e),r.value=y(l),n((()=>{s.value.focus()}))}}}};const f=l();c("data-v-1bf686cc");const v={class:"hello"},k=r("div",{class:"guide-wrapper"},[r("header",{class:"guide--title"},[p("使用方法 "),r("ul",{class:"guide--box"},[r("li",null,[p("1. 手动输入 "),r("img",{src:"./assets/input_example.8890b328.gif",alt:"演示"})]),r("li",null,"2. 复制粘贴")])])],-1),w={class:"left"},I=r("p",null,[r("label",{for:"transform"},"平假名")],-1),g={class:"output-wrapper"},b={class:"center"},S=r("p",null,[r("label",{for:"transform"},"请在下方输入要转换的罗马音并以空格间隔")],-1),W={class:"right"},j=r("p",null,[r("label",{for:"transform"},"片假名")],-1),A={class:"output-wrapper"};h();const C=f(((e,t,n,l,c,p)=>{const h=a("SelectMenu");return y(),o("div",v,[k,r("section",null,[r("div",w,[I,r("pre",g,s(l.outputStr),1)]),r("div",b,[S,i(r("textarea",{class:"textarea",id:"transform",ref:"textareaDom","onUpdate:modelValue":t[1]||(t[1]=e=>l.inputStr=e),onKeyup:t[2]||(t[2]=(...e)=>l.doKeyup&&l.doKeyup(...e)),onPaste:t[3]||(t[3]=(...e)=>l.doPaste&&l.doPaste(...e))},null,544),[[d,l.inputStr]]),l.showSelectMenu?(y(),o(h,{key:0,item:l.katakanaToChoose,onChooseWord:l.doChooseWord},null,8,["item","onChooseWord"])):u("",!0)]),r("div",W,[j,r("pre",A,s(l.outputStr),1)])])])}));m.render=C,m.__scopeId="data-v-1bf686cc";export default m;
